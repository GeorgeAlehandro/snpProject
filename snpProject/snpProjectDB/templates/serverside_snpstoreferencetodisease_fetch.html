<!DOCTYPE html>
{% extends 'base.html' %}
{% block content %}
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">

	</head>
	<body>
		<h1>SNPs</h1>
		<div class="dynamic">
			<span class="rightfloat">
				Trait searched:
				<b>
				<span id="name-disease">
					</b>

				</span>
				</span>
						<span class="rightfloat">
						mentioned <b> <span id="number-disease"> </b></span> times
					</span>
				</span>
		</div>
		<hr>
		<table id="snp-reference-disease-table" class="table table-striped table-bordered">
			<thead>
				<tr>
					<th>rsid</th>
					<th>Strongest SNP-Risk Allele</th>
					<th>Trait/Disease</th>
					<th>pubmedid</th>
					<th>pvalue</th>
					<th>pvalueMLog</th>
					<th>ReportedGenes</th>
					<th>ci</th>
				</tr>

			</thead>
			<tbody></tbody>
		</table>


		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>

		<script language="javascript">
		console.log(location.search.substring(1));
		var url = new URL(window.location.href);
		console.log({% url 'order_snptodiseasetoref' %});
		var link = String({% url 'order_snptodiseasetoref' %});
		var oTable;
			$(document).ready(function () {
				var oTable = $('#snp-reference-disease-table').DataTable({
				dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ],

						  "initComplete": function(settings, json) {
						   var info = oTable.page.info();
  var count = info.recordsDisplay;
			  $('#number-disease').html(count);
		  },
				"processing": true,
					"serverSide": true,
					"ajax": link.concat("?",location.search.substring(1))
				});
			});

		</script>
		<script language="javascript">
		const queryString = window.location.search;
		console.log(queryString);
		const urlParams = new URLSearchParams(queryString);
		const product = urlParams.get('diseaseID')
		console.log(product);
		$(document).ready(function () {
				$('#name-disease').html(product);
			});
		</script>
	<script language="javascript">

		</script>
	</body>
{% endblock %}


